import{Ya as v,Yb as m,Zb as f,b as l,c as d,d as u,g as h,j as i,ya as p,z as n}from"./chunk-UWOWUE4S.js";import{e as c}from"./chunk-XD4PSF4R.js";var y=(()=>{let r=class r{constructor(){this.httpClient=i(p),this.navCtrl=i(v),this.apiEndPoint=`${m.apiUrl}/accessories`,this.alertsService=i(f),this.accessories=n([]),this.currentAccessories=n([]),this.loadData()}loadData(){let e=this.httpClient.get(`${this.apiEndPoint}/list`).pipe(d(3),l(t=>(this.alertsService.basicAlert("Error",`Ocurri\xF3 un error al conectarse al servidor: ${t.statusText}`,["Ok"]),[])),u(1)).subscribe(t=>{let s=t.data;this.accessories.set(s),e.unsubscribe()})}addCurrentAccessory(e){this.currentAccessories.update(t=>[...t,e])}removeCurrentAccessory(e){this.currentAccessories.update(t=>t.filter(s=>s.idAccesorio!=e.idAccesorio))}create(e){return c(this,null,function*(){yield this.alertsService.presentLoading(),this.httpClient.post(`${this.apiEndPoint}/add`,e).subscribe({next:t=>{this.alertsService.dismissDefaultLoading(),this.accessories.update(s=>[...s,t.data]),this.navCtrl.navigateRoot("accessories"),this.alertsService.basicAlert("\xC9xito!",`Se guardado exitosamente el accesorio: ${t.data.nomAccesorio}.`,["Ok"])},error:t=>{this.alertsService.dismissDefaultLoading(),this.alertsService.basicAlert("Error",`Ocurri\xF3 un error al conectarse al servidor: ${t.statusText}`,["Ok"])}})})}update(e){return c(this,null,function*(){yield this.alertsService.presentLoading(),this.httpClient.put(`${this.apiEndPoint}/update`,e).subscribe({next:t=>{this.alertsService.dismissDefaultLoading(),this.accessories.update(s=>{let o=[...s],b=o.indexOf(e);return o[b]=t.data,o}),this.navCtrl.navigateRoot(["/accessories"]),this.alertsService.basicAlert("\xC9xito!",`Se guardado exitosamente el accesorio: ${t.data.nomAccesorio}.`,["Ok"])},error:t=>{this.alertsService.dismissDefaultLoading(),this.alertsService.basicAlert("Error",`Ocurri\xF3 un error al conectarse al servidor: ${t.statusText}`,["Ok"])}})})}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=h({token:r,factory:r.\u0275fac,providedIn:"root"});let a=r;return a})();export{y as a};
