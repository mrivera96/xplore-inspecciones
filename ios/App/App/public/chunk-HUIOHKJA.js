import{a as U}from"./chunk-56TNLAWK.js";import{E as p,K as m,L as u,M as b,N as P,P as I,Rb as Y,Sb as A,Tb as q,U as D,V as N,W as x,Wb as k,X as M,Xb as Q,Y as S,fb as z,ga as _,gb as L,h as T,k as v,l as E,na as F,o as O,p as V,pb as R,sb as j,t as C,ua as H,ub as B,v as d,vb as X,w as y}from"./chunk-UWOWUE4S.js";import{a as h,b as w,e as f}from"./chunk-XD4PSF4R.js";var W=["swiper"],G=o=>({"no-title":o}),J=o=>({"no-text":o});var K=(()=>{class o{constructor(t){this.modalController=t,this.alt="",this.scheme="auto",this.slideOptions={},this.srcFallback="",this.srcHighRes="",this.swipeToClose=!0,this.text="",this.title="",this.titleSize="",this.defaultSlideOptions={zoom:{enabled:!0}},this.options={},this.swipeState={phase:"init",direction:"none",swipeType:"none",startX:0,startY:0,distance:0,distanceX:0,distanceY:0,threshold:150,restraint:100,allowedTime:500,elapsedTime:0,startTime:0}}ngOnInit(){return f(this,null,function*(){this.options=h(h({},this.defaultSlideOptions),this.slideOptions),this.src=this.srcHighRes||this.src,this.setStyle(),this.setScheme(this.scheme),this.initSwipeToClose(this.swipeToClose)})}setStyle(){let t=document.querySelector(".ion-img-viewer");t==null||t.style.setProperty("--height","100%"),t==null||t.style.setProperty("--width","100%"),t==null||t.style.setProperty("--border-radius","0")}setScheme(t){if(t&&t==="auto")return;let e=document.querySelector(".ion-img-viewer");this.scheme==="light"&&(e==null||e.style.setProperty("--ion-background-color","#ffffff"),e==null||e.style.setProperty("--ion-background-color-rgb","255, 255, 255"),e==null||e.style.setProperty("--ion-text-color","#000"),e==null||e.style.setProperty("--ion-text-color-rgb","0,0,0")),this.scheme==="dark"&&(e!=null&&e.classList.contains("ios")?(e==null||e.style.setProperty("--ion-background-color","#000000"),e==null||e.style.setProperty("--ion-background-color-rgb","0, 0, 0")):(e==null||e.style.setProperty("--ion-background-color","#121212"),e==null||e.style.setProperty("--ion-background-color-rgb","18,18,18")),e==null||e.style.setProperty("--ion-text-color","#ffffff"),e==null||e.style.setProperty("--ion-text-color-rgb","255,255,255"))}initSwipeToClose(t=!0){if(!t)return;let e=document.querySelector("ion-modal");e==null||e.addEventListener("mousedown",i=>this.swipeStart(i),!0),e==null||e.addEventListener("mousemove",i=>this.swipeMove(i),!0),e==null||e.addEventListener("mouseup",i=>this.swipeEnd(i),!0),e==null||e.addEventListener("touchstart",i=>this.swipeStart(i),!0),e==null||e.addEventListener("touchmove",i=>this.swipeMove(i),!0),e==null||e.addEventListener("touchend",i=>this.swipeEnd(i),!0),this.modalController.getTop().then(i=>{i==null||i.onWillDismiss().then(()=>{document.removeEventListener("mousedown",this.swipeStart,!0),document.removeEventListener("mousemove",this.swipeMove,!0),document.removeEventListener("mouseup",this.swipeMove,!0),document.removeEventListener("touchstart",this.swipeStart,!0),document.removeEventListener("touchmove",this.swipeMove,!0),document.removeEventListener("touchend",this.swipeMove,!0)})})}swipeStart(t){let{pageX:e,pageY:i}=t.type==="touchstart"&&t.changedTouches?t==null?void 0:t.changedTouches[0]:t;this.swipeState=w(h({},this.swipeState),{phase:"start",direction:"none",distance:0,startX:e,startY:i,startTime:new Date().getTime()})}swipeMove(t){let{pageX:e,pageY:i}=t.type==="touchmove"&&t.changedTouches?t==null?void 0:t.changedTouches[0]:t,s=e-this.swipeState.startX,r=i-this.swipeState.startY,a,c;Math.abs(s)>Math.abs(r)?(a=s<0?"left":"right",c=s):(a=r<0?"up":"down",c=r),this.swipeState=w(h({},this.swipeState),{phase:"move",direction:a,distance:c,distanceX:s,distanceY:r}),t.cancelable&&t.preventDefault()}swipeEnd(t){if(this.swipeState.phase==="none")return;let{allowedTime:e,direction:i,restraint:s,startTime:r,threshold:a,distanceX:c,distanceY:g}=this.swipeState,l;if(new Date().getTime()-r<=e&&(Math.abs(c)>=a&&Math.abs(g)<=s||Math.abs(g)>=a&&Math.abs(c)<=s)&&(l=i),this.swipeState=w(h({},this.swipeState),{phase:"end",swipeType:l!=null?l:""}),l==="down")return this.closeModal()}closeModal(){this.modalController.dismiss()}}return o.\u0275fac=function(t){return new(t||o)(y(k))},o.\u0275cmp=v({type:o,selectors:[["ion-viewer-modal"]],viewQuery:function(t,e){if(t&1&&D(W,5),t&2){let i;N(i=x())&&(e.swiperRef=i.first)}},inputs:{alt:"alt",scheme:"scheme",slideOptions:"slideOptions",src:"src",srcFallback:"srcFallback",srcHighRes:"srcHighRes",swipeToClose:"swipeToClose",text:"text",title:"title",titleSize:"titleSize"},decls:17,vars:13,consts:[["swiper",""],[3,"ngClass"],["slot","primary"],[3,"click"],["slot","icon-only","name","close"],[3,"size"],[3,"forceOverscroll"],["centeredSlides","true","passiveListeners","false","zoom","true",3,"options"],[1,"swiper-zoom-container"],[3,"alt","src"],[1,"ion-text-center"]],template:function(t,e){if(t&1){let i=P();m(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-buttons",2)(3,"ion-button",3),I("click",function(){return O(i),V(e.closeModal())}),b(4,"ion-icon",4),u()(),m(5,"ion-title",5),M(6),u()()(),m(7,"ion-content",6)(8,"swiper-container",7,0)(10,"swiper-slide")(11,"div",8),b(12,"img",9),u()()()(),m(13,"ion-footer",1)(14,"ion-toolbar",10)(15,"ion-text"),M(16),u()()()}t&2&&(p("ngClass",_(9,G,e.title&&e.title.length<=0)),d(5),p("size",e.titleSize),d(),S(e.title),d(),p("forceOverscroll",!1),d(),p("options",e.options),d(4),p("alt",e.alt)("src",e.src,C),d(),p("ngClass",_(11,J,e.text&&e.text.length<=0)),d(3),S(e.text))},dependencies:[F,z,L,R,j,B,X,Y,A,q],styles:["ion-slides[_ngcontent-%COMP%]{--height: 100%;height:100%}ion-toolbar[_ngcontent-%COMP%]{--border-style: none;--background: rgba(var(--ion-background-color-rgb, (255, 255, 255)), .6);background:rgba(var(--ion-background-color-rgb, 255, 255, 255),.6)}ion-header[_ngcontent-%COMP%]{opacity:1;position:absolute}ion-header.no-title[_ngcontent-%COMP%]:after{content:none}ion-header.no-title[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: rgba(0, 0, 0, 0);background:rgba(0,0,0,0)}ion-footer[_ngcontent-%COMP%]{position:absolute;bottom:0}ion-footer.no-text[_ngcontent-%COMP%]:before{content:none}ion-footer.no-text[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: rgba(0, 0, 0, 0);background:rgba(0,0,0,0)}swiper-container[_ngcontent-%COMP%]{width:100%;height:100%}swiper-slide[_ngcontent-%COMP%]{overflow:hidden}"]}),o})();U();var de=(()=>{class o{constructor(t){this.modalController=t}viewImage(Z){return f(this,arguments,function*(t,e="",i="",s="",r="",a="",c="auto",g={},l=!0){return yield(yield this.modalController.create({component:K,componentProps:{src:t,srcFallback:e,srcHighRes:i,title:s,titleSize:r,text:a,scheme:c,slideOptions:g,swipeToClose:l},cssClass:this.cssClass&&this.cssClass instanceof Array?["ion-img-viewer",...this.cssClass]:["ion-img-viewer",this.cssClass],keyboardClose:!0,showBackdrop:!0})).present()})}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)(y(k))},o.\u0275cmp=v({type:o,selectors:[["ion-img-viewer"]],inputs:{alt:"alt",cssClass:"cssClass",scheme:"scheme",slideOptions:"slideOptions",src:"src",srcFallback:"srcFallback",srcHighRes:"srcHighRes",swipeToClose:"swipeToClose",text:"text",title:"title",titleSize:"titleSize"},decls:1,vars:2,consts:[[3,"click","error","alt","src"]],template:function(t,e){t&1&&(m(0,"img",0),I("click",function(){return e.viewImage(e.src,e.srcFallback,e.srcHighRes,e.title,e.titleSize,e.text,e.scheme,e.slideOptions,e.swipeToClose)})("error",function(){return e.src=e.srcFallback}),u()),t&2&&p("alt",e.alt)("src",e.src,C)},styles:["[_nghost-%COMP%]{display:block}"]}),o})();var pe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=E({type:o}),o.\u0275inj=T({imports:[H,Q]}),o})();export{de as a,pe as b};
