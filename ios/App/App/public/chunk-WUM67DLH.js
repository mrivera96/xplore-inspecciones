import{Ya as m,Yb as v,Zb as g,b as c,c as d,d as l,g as p,j as a,ya as u,z as h}from"./chunk-UWOWUE4S.js";import{e as n}from"./chunk-XD4PSF4R.js";var T=(()=>{let e=class e{constructor(){this.httpClient=a(u),this.navCtrl=a(m),this.apiEndPoint=`${v.apiUrl}/damage-types`,this.alertsService=a(g),this.damageTypes=h([]),this.loadData()}loadData(){let r=this.httpClient.get(`${this.apiEndPoint}/list`).pipe(d(3),c(t=>(this.alertsService.basicAlert("Error",`Ocurri\xF3 un error al conectarse al servidor: ${t.statusText}`,["Ok"]),[])),l(1)).subscribe(t=>{let i=t.data;this.damageTypes.set(i),r.unsubscribe()})}create(r){return n(this,null,function*(){yield this.alertsService.presentLoading(),this.httpClient.post(`${this.apiEndPoint}/add`,r).subscribe({next:t=>{this.alertsService.dismissDefaultLoading(),this.damageTypes.update(i=>[...i,t.data]),this.navCtrl.navigateRoot("damage-types"),this.alertsService.basicAlert("\xC9xito!",`Se guardado exitosamente el tipo de da\xF1o: ${t.data.descTipoDanio}.`,["Ok"])},error:t=>{this.alertsService.dismissDefaultLoading(),this.alertsService.basicAlert("Error",`Ocurri\xF3 un error al conectarse al servidor: ${t.statusText}`,["Ok"])}})})}update(r){return n(this,null,function*(){yield this.alertsService.presentLoading(),this.httpClient.put(`${this.apiEndPoint}/update`,r).subscribe({next:t=>{this.alertsService.dismissDefaultLoading(),this.damageTypes.update(i=>{let o=[...i],f=o.indexOf(r);return o[f]=t.data,o}),this.navCtrl.navigateRoot("damage-types"),this.alertsService.basicAlert("\xC9xito!",`Se guardado exitosamente el tipo de da\xF1o: ${t.data.descTipoDanio}.`,["Ok"])},error:t=>{this.alertsService.dismissDefaultLoading(),this.alertsService.basicAlert("Error",`Ocurri\xF3 un error al conectarse al servidor: ${t.statusText}`,["Ok"])}})})}};e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"});let s=e;return s})();export{T as a};
