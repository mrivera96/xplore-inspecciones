import{Ya as h,Yb as v,Zb as m,c,d as l,g as d,j as a,ya as u,z as p}from"./chunk-UWOWUE4S.js";import{e as n}from"./chunk-XD4PSF4R.js";var y=(()=>{let e=class e{constructor(){this.httpClient=a(u),this.navCtrl=a(h),this.apiEndPoint=`${v.apiUrl}/auto-parts`,this.alertsService=a(m),this.autoParts=p([]),this.loadData()}loadData(){let i=this.httpClient.get(`${this.apiEndPoint}/list`).pipe(c(3),l(1)).subscribe(t=>{this.autoParts.set(t.data),i.unsubscribe()})}create(i){return n(this,null,function*(){yield this.alertsService.presentLoading(),this.httpClient.post(`${this.apiEndPoint}/add`,i).subscribe({next:t=>{this.alertsService.dismissDefaultLoading(),this.autoParts.update(s=>[...s,t.data]),this.navCtrl.navigateRoot("auto-parts"),this.alertsService.basicAlert("\xC9xito!",`Se guardado exitosamente la pieza: ${t.data.descPieza}.`,["Ok"])},error:t=>{this.alertsService.dismissDefaultLoading(),this.alertsService.basicAlert("Error",`Ocurri\xF3 un error al conectarse al servidor: ${t.statusText}`,["Ok"])}})})}update(i){return n(this,null,function*(){yield this.alertsService.presentLoading(),this.httpClient.put(`${this.apiEndPoint}/update`,i).subscribe({next:t=>{this.alertsService.dismissDefaultLoading(),this.autoParts.update(s=>{let o=[...s],f=o.indexOf(i);return o[f]=t.data,o}),this.navCtrl.navigateRoot("auto-parts"),this.alertsService.basicAlert("\xC9xito!",`Se guardado exitosamente la pieza: ${t.data.descPieza}.`,["Ok"])},error:t=>{this.alertsService.dismissDefaultLoading(),this.alertsService.basicAlert("Error",`Ocurri\xF3 un error al conectarse al servidor: ${t.statusText}`,["Ok"])}})})}};e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();export{y as a};
