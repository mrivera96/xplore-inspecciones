import{a as K,b as Q}from"./chunk-OVKUN2VZ.js";import{$a as T,E as p,K as i,Ka as b,L as n,Lb as z,M as u,Ma as x,Na as w,Oa as y,P as g,Pa as v,Ra as k,Sa as I,Ta as F,Ua as N,Va as U,Wa as M,X as h,Xb as H,Ya as D,Zb as J,_b as f,cb as A,fb as L,h as m,hb as O,ib as _,j as s,jb as j,k as C,l as c,lb as E,mb as G,ob as P,pb as R,tb as V,ua as S,v as d,yb as q,zb as B}from"./chunk-UWOWUE4S.js";import"./chunk-BSN2JFBO.js";import"./chunk-ON2Z5523.js";import"./chunk-JNTQS7SG.js";import"./chunk-4PGTP63H.js";import"./chunk-HC6MZPB3.js";import"./chunk-QRDTLJMM.js";import"./chunk-SNYBEKMS.js";import"./chunk-5GDE5I7K.js";import"./chunk-CUAZPCFG.js";import"./chunk-KYGY6K7Z.js";import"./chunk-5AWJTBLE.js";import"./chunk-C4BIBDV4.js";import"./chunk-4537AK5U.js";import"./chunk-MM5QLNJM.js";import"./chunk-3573TPBU.js";import"./chunk-2EOHHFOF.js";import"./chunk-JXIEZMHN.js";import"./chunk-2UEEUHXC.js";import"./chunk-MCRJI3T3.js";import"./chunk-FOZNFNPM.js";import"./chunk-G5HA7YTQ.js";import{e as l}from"./chunk-XD4PSF4R.js";var X=(()=>{let e=class e{constructor(){this.authService=s(Q),this.alertService=s(J),this.localService=s(K),this.navController=s(D),this.loading=!1,this.returnUrl="home",this.alertHeader="",this.alertMessage="",this.alertButtons=[],this.isAlertOpen=!1,this.rememberedUser=null,this.rememberedUser=this.localService.getData("remember_user");let t="";this.rememberedUser!=null&&(t=this.rememberedUser),this.loginForm=new y({nickname:new v(t),password:new v})}ngOnInit(){}onLogin(){return l(this,null,function*(){this.loginForm.valid&&(yield this.alertService.presentLoading(),this.authService.login(this.loginForm.controls.nickname.value.toString().trim(),this.loginForm.controls.password.value.toString().trim()).subscribe({next:t=>l(this,null,function*(){let r=t.data.user;this.localService.saveData("currentUser",r),this.authService.setCurrUser(r),this.alertService.dismissDefaultLoading(),this.navController.navigateForward(this.returnUrl)}),error:t=>l(this,null,function*(){var r;yield this.alertService.dismissDefaultLoading(),yield this.alertService.basicAlert("Error!",((r=t.error)==null?void 0:r.message)||"Ocurri\xF3 un error al conectar con el servidor",["Ok"])})}))})}rememberUser(t){let r=!t.target.checked;console.log(r),r?this.localService.saveData("remember_user",this.loginForm.controls.nickname.value):this.localService.removeData("remember_user")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=C({type:e,selectors:[["app-login"]],decls:20,vars:3,consts:[[3,"fullscreen"],[2,"border-radius","20px","width","80%","margin-right","auto","margin-left","auto","margin-top","10%"],[2,"align-items","center"],["fixed",""],[3,"ngSubmit","formGroup"],["size","12"],["lines","none"],["required","","formControlName","nickname","label","Nombre de usuario:","labelPlacement","stacked","type","text","placeholder","ingrese su nombre de usuario","errorText","Campo obligatorio"],["required","","formControlName","password","label","Contrase\xF1a:","labelPlacement","stacked","type","password","placeholder","ingrese su contrase\xF1a","errorText","Campo obligatorio"],[3,"click","checked"],["expand","block","shape","round","type","submit","expand","block","fill","clear","shape","round"]],template:function(r,a){r&1&&(u(0,"app-toolbar"),i(1,"ion-content",0)(2,"ion-card",1)(3,"ion-card-header",2)(4,"ion-card-title"),h(5," Ingrese sus credenciales para acceder"),n()(),i(6,"ion-card-content")(7,"ion-grid",3)(8,"form",4),g("ngSubmit",function(){return a.onLogin()}),i(9,"ion-row")(10,"ion-col",5)(11,"ion-item",6),u(12,"ion-input",7),n(),i(13,"ion-item",6),u(14,"ion-input",8),n(),i(15,"ion-item",6)(16,"ion-checkbox",9),g("click",function($){return a.rememberUser($)}),h(17,"Recordar usuario"),n()(),i(18,"ion-button",10),h(19," Acceder "),n()()()()()()()()),r&2&&(d(),p("fullscreen",!0),d(7),p("formGroup",a.loginForm),d(8),p("checked",a.rememberedUser!=null&&a.rememberedUser!=""))},dependencies:[k,x,w,N,L,O,_,j,E,G,P,R,V,q,B,z,T,A,I,F,f],styles:['.bubble[_ngcontent-%COMP%]{position:relative;width:100%;height:280px!important;overflow:hidden;display:flex;justify-content:center;color:var(--ion-color-secondary-contrast);align-items:self-start}.bubble[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:50%;transform-origin:bottom;transform:translate(-50%) scale(2);margin:-400px auto 0;width:100%;height:570px!important;overflow:hidden;border-radius:0 0 70% 70%;background-color:var(--ion-color-primary);box-shadow:1px 4px 7px #0000005e}.content[_ngcontent-%COMP%]{margin-top:25px;position:relative;z-index:1;max-width:1000px;text-align:center;padding-bottom:2%}']});let o=e;return o})();var ee=[{path:"",component:X}],Y=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=c({type:e}),e.\u0275inj=m({imports:[b.forChild(ee),b]});let o=e;return o})();var ye=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=c({type:e}),e.\u0275inj=m({imports:[S,U,H,Y,M,f]});let o=e;return o})();export{ye as LoginPageModule};
