import{a as O}from"./chunk-TEATCKVU.js";import{a as Ie}from"./chunk-PMONNLTD.js";import"./chunk-HUIOHKJA.js";import"./chunk-WTY6MB72.js";import"./chunk-LEX6B2L3.js";import{a as x}from"./chunk-IKMMEWKZ.js";import{b as fe}from"./chunk-OVKUN2VZ.js";import"./chunk-7JYYFWPO.js";import"./chunk-56TNLAWK.js";import{d as he}from"./chunk-3Z42Z5P2.js";import"./chunk-HCFXBRVH.js";import{A as v,B as T,C as D,Cb as L,Db as ie,E as $,G as P,Ga as W,Gb as oe,H as y,Ha as q,I as F,J as w,Jb as re,K as c,Ka as R,Kb as ce,L as a,Lb as se,M as m,Mb as ae,N as V,P as I,Pb as le,Q as f,Sb as pe,Tb as me,Va as z,Vb as de,Wa as H,X as u,Xb as ue,Ya as J,Z as S,_ as N,_b as _e,cb as K,fa as G,gb as Q,h as g,hb as X,ib as Y,j as _,k as B,l as C,la as h,o as b,ob as Z,p as k,pb as ee,tb as te,ua as U,ub as ne,v as p,vb as A,zb as M}from"./chunk-UWOWUE4S.js";import"./chunk-BSN2JFBO.js";import"./chunk-ON2Z5523.js";import"./chunk-JNTQS7SG.js";import"./chunk-4PGTP63H.js";import"./chunk-HC6MZPB3.js";import"./chunk-QRDTLJMM.js";import"./chunk-SNYBEKMS.js";import"./chunk-5GDE5I7K.js";import"./chunk-CUAZPCFG.js";import"./chunk-KYGY6K7Z.js";import"./chunk-5AWJTBLE.js";import"./chunk-C4BIBDV4.js";import"./chunk-4537AK5U.js";import"./chunk-MM5QLNJM.js";import"./chunk-3573TPBU.js";import"./chunk-2EOHHFOF.js";import"./chunk-JXIEZMHN.js";import"./chunk-2UEEUHXC.js";import"./chunk-MCRJI3T3.js";import"./chunk-FOZNFNPM.js";import"./chunk-G5HA7YTQ.js";import{a as E}from"./chunk-XD4PSF4R.js";var Ce=()=>[A,M,L,ie],Se=()=>["/home"];function xe(e,n){if(e&1){let s=V();c(0,"ion-item",11),I("click",function(){let t=b(s).$implicit,o=f(3);return k(o.gotToDetail(t))}),m(1,"ion-icon",12),c(2,"ion-label",13)(3,"h2"),u(4),a(),c(5,"p"),u(6),a()()()}if(e&2){let s=n.$implicit;p(4),S("Inspecci\xF3n No.: ",s.numInspeccion,""),p(2),N(" Veh\xEDculo: ",s.car==null?null:s.car.nemVehiculo," | No. Contrato: ",s.contract==null?null:s.contract.numContrato," ")}}function Ee(e,n){e&1&&(c(0,"ion-item",10),m(1,"ion-icon",14),c(2,"ion-label"),u(3,"No se encontraron inspecciones abiertas"),a()())}function be(e,n){if(e&1&&(c(0,"ion-list"),F(1,xe,7,3,"ion-item",9,y,!1,Ee,4,0,"ion-item",10),a()),e&2){let s=f(2);p(),w(s.openInspections())}}function ke(e,n){e&1&&(c(0,"ion-item"),m(1,"ion-icon",14),c(2,"ion-label"),u(3,"Obteniendo datos.."),a(),m(4,"ion-spinner",15),a())}function Te(e,n){if(e&1&&(v(0,be,4,1)(1,ke,5,0),T(2,0,Ce,null,1)),e&2){let s=f();p(2),D(s.serviceInspections())}}function De(e,n){if(e&1){let s=V();c(0,"ion-item",11),I("click",function(){let t=b(s).$implicit,o=f(3);return k(o.gotToDetail(t))}),m(1,"ion-icon",16),c(2,"ion-label",1)(3,"h2"),u(4),a(),c(5,"p"),u(6),a()()()}if(e&2){let s=n.$implicit;p(4),S("Inspecci\xF3n No.: ",s.numInspeccion,""),p(2),N(" Veh\xEDculo: ",s.car==null?null:s.car.nemVehiculo," | No. Contrato: ",s.contract==null?null:s.contract.numContrato," ")}}function Pe(e,n){e&1&&(c(0,"ion-item",10),m(1,"ion-icon",14),c(2,"ion-label"),u(3,"No se encontraron inspecciones cerradas"),a()())}function ye(e,n){if(e&1&&(c(0,"ion-list"),F(1,De,7,3,"ion-item",9,y,!1,Pe,4,0,"ion-item",10),a()),e&2){let s=f(2);p(),w(s.closedInspections())}}function Fe(e,n){e&1&&(c(0,"ion-item"),m(1,"ion-icon",14),c(2,"ion-label"),u(3,"Obteniendo datos.."),a(),m(4,"ion-spinner",15),a())}function we(e,n){e&1&&(c(0,"ion-item"),m(1,"ion-icon",14),c(2,"ion-label"),u(3,"Obteniendo datos.."),a(),m(4,"ion-spinner",15),a())}function Ve(e,n){if(e&1&&(v(0,ye,4,1)(1,Fe,5,0)(2,we,5,0),T(3,0,Ce,1,2)),e&2){let s=f();p(3),D(s.serviceInspections)}}var j=(()=>{let n=class n{constructor(){var r,t,o;this.inspectionsServices=_(he),this.authService=_(fe),this.router=_(W),this.navController=_(J),this.serviceInspections=this.inspectionsServices.inspections,this.allOpenInspections=h(()=>{var i;return(i=this.serviceInspections())==null?void 0:i.filter(l=>{var d;return((d=l.state)==null?void 0:d.descEstado)=="Abierta"})}),this.openInspections=h(()=>{var i;return(i=this.serviceInspections())==null?void 0:i.filter(l=>{var d;return((d=l.state)==null?void 0:d.descEstado)=="Abierta"})}),this.allClosedInspections=h(()=>{var i;return(i=this.serviceInspections())==null?void 0:i.filter(l=>{var d;return((d=l.state)==null?void 0:d.descEstado)=="Cerrada"})}),this.closedInspections=h(()=>{var i;return(i=this.serviceInspections())==null?void 0:i.filter(l=>{var d;return((d=l.state)==null?void 0:d.descEstado)=="Cerrada"})}),this.currentUser=this.authService.currentUser,this.currentStage=null,this.currentStage=(o=(t=(r=this.router.getCurrentNavigation())==null?void 0:r.extras)==null?void 0:t.state)==null?void 0:o.stage}ngOnInit(){this.inspectionsServices.clearState()}goToCheckOut(){this.inspectionsServices.currentInspection.update(r=>{let t=E({},r);return t.stage="checkout",t}),this.router.navigate(["inspection"],{state:{stage:"checkout"}})}goToCheckIn(){this.inspectionsServices.currentInspection.update(r=>{let t=E({},r);return t.stage="checkin",t}),this.router.navigate(["inspection"],{state:{stage:"checkin"}})}gotToDetail(r){this.inspectionsServices.currentInspection.set(r);let t={state:{idInspeccion:r.idInspeccion}};this.navController.navigateForward("/inspections/detail",t)}onLogout(){this.authService.logout()}onSearch(r){this.currentStage=="checkout"?r.value!=""?this.openInspections=h(()=>{var t;return(t=this.allOpenInspections())==null?void 0:t.filter(o=>{var i,l;return((i=o.car)==null?void 0:i.nemVehiculo.includes(r.target.value))||((l=o.contract)==null?void 0:l.numContrato.includes(r.target.value))})}):this.openInspections=h(()=>{var t;return(t=this.serviceInspections())==null?void 0:t.filter(o=>{var i;return((i=o.state)==null?void 0:i.descEstado)=="Abierta"})}):this.currentStage=="checkin"&&(r.value!=""?this.closedInspections=h(()=>{var t;return(t=this.allClosedInspections())==null?void 0:t.filter(o=>{var i,l;return((i=o.car)==null?void 0:i.nemVehiculo.includes(r.target.value))||((l=o.contract)==null?void 0:l.numContrato.includes(r.target.value))})}):this.closedInspections=h(()=>{var t;return(t=this.serviceInspections())==null?void 0:t.filter(o=>{var i;return((i=o.state)==null?void 0:i.descEstado)=="Cerrada"})}))}onCancel(r){this.currentStage=="checkout"?this.openInspections=h(()=>{var t;return(t=this.serviceInspections())==null?void 0:t.filter(o=>{var i;return((i=o.state)==null?void 0:i.descEstado)=="Abierta"})}):this.closedInspections=h(()=>{var t;return(t=this.serviceInspections())==null?void 0:t.filter(o=>{var i;return((i=o.state)==null?void 0:i.descEstado)=="Cerrada"})})}handleRefresh(r){this.inspectionsServices.loadData(),r.target.complete()}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=B({type:n,selectors:[["app-inspections"]],decls:18,vars:5,consts:[[1,"ion-no-border"],["color","primary"],["slot","start"],["routerDirection","root","src","assets/img/logo.png","width","30%",3,"routerLink"],["placeholder","B\xFAsqueda por veh\xEDculo o contrato","slot","end",3,"ionInput","ionCancel"],["slot","fixed",3,"ionRefresh"],["fixed",""],["size","12"],[2,"border-radius","10px"],["detail","true","button",""],["lines","none"],["detail","true","button","",3,"click"],["color","primary","slot","start","name","checkmark-circle"],["color","secondary"],["slot","start","name","alert-circle"],["color","secondary","name","crescent"],["color","secondary","slot","start","name","checkmark-done-circle"]],template:function(t,o){t&1&&(c(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),m(3,"ion-menu-button")(4,"img",3),a(),c(5,"ion-searchbar",4),I("ionInput",function(l){return o.onSearch(l)})("ionCancel",function(l){return o.onCancel(l)}),a()()(),c(6,"ion-content")(7,"ion-refresher",5),I("ionRefresh",function(l){return o.handleRefresh(l)}),m(8,"ion-refresher-content"),a(),c(9,"ion-grid",6)(10,"ion-row")(11,"ion-col",7)(12,"ion-title"),u(13),a()()()(),c(14,"ion-card",8)(15,"ion-card-content"),v(16,Te,4,1)(17,Ve,5,1),a()()()),t&2&&(p(4),$("routerLink",G(4,Se)),p(9),S("Inspecciones ",o.currentStage=="checkout"?"abiertas":"cerradas",""),p(3),P(16,o.currentStage=="checkout"?16:-1),p(),P(17,o.currentStage=="checkin"?17:-1))},dependencies:[Q,X,Y,Z,ee,te,ne,A,M,L,oe,re,ce,se,ae,le,pe,me,K,de,q]});let e=n;return e})();var Ne=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"checkout",component:j,canActivate:[x]},{path:"checkin",component:j,canActivate:[x]},{path:"detail",loadComponent:()=>import("./chunk-B4MPDPRD.js").then(e=>e.InspectionDetailPage),canActivate:[x,O]},{path:"create",loadChildren:()=>import("./chunk-XKYQDYSA.js").then(e=>e.InspectionCreatePageModule),canActivate:[O]}],ve=(()=>{let n=class n{};n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=C({type:n}),n.\u0275inj=g({imports:[R.forChild(Ne),R]});let e=n;return e})();var it=(()=>{let n=class n{};n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=C({type:n}),n.\u0275inj=g({imports:[ue,U,ve,H,z,_e,Ie]});let e=n;return e})();export{it as InspectionsPageModule};
